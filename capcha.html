<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
<center><div id="table" style="display: table;">
    <div id="row1" style="display: table-row;">
       <div id="cell11" class="tile1" onClick="clickTile(1,1);"></div>
       <div id="cell12" class="tile2" onClick="clickTile(1,2);"></div>
       <div id="cell13" class="tile3" onClick="clickTile(1,3);"></div>
    </div>
    <div id="row2" style="display: table-row;">
       <div id="cell21" class="tile4" onClick="clickTile(2,1);"></div>
       <div id="cell22" class="tile5" onClick="clickTile(2,2);"></div>
       <div id="cell23" class="tile6" onClick="clickTile(2,3);"></div>
    </div>
    <div id="row3" style="display: table-row;">
       <div id="cell31" class="tile7" onClick="clickTile(3,1);"></div>
       <div id="cell32" class="tile8" onClick="clickTile(3,2);"></div>
       <div id="cell33" class="tile9" onClick="clickTile(3,3);"></div>
    </div>
 </div>
   <button onClick="shuffle();">New Game</button>
 </center>
</body>
<style>
    body{ 
        background: #AAAAAA;
    }

    #table {
    display: table;
    margin: 0 auto;
    width: 360px;
    height: 360px;
    }

.tile1, .tile2, .tile3, .tile4, .tile5, .tile6, .tile7, .tile8, .tile9 {
  display: table-cell;
  width: 120px;
  height: 120px;
  border: 1px solid white;
  background: url(src/images/background\ capcha.jpg);
  background-size: 360px 360px;
  cursor: pointer;
}

.tile1 {background-position: 0 0;}
.tile2 {background-position: -120px 0;}
.tile3 {background-position: -240px 0;}
.tile4 {background-position: 0 -120px;}
.tile5 {background-position: -120px -120px;}
.tile6 {background-position: -240px -120px;}
.tile7 {background-position: 0 -240px;}
.tile8 {background-position: -120px -240px;}
.tile9 {background: white; cursor: default;}

</style>
<script>
    function swapTiles(cell1,cell2) {
  var temp = document.getElementById(cell1).className;
  document.getElementById(cell1).className = document.getElementById(cell2).className;
  document.getElementById(cell2).className = temp;
}

function shuffle() {
  for (var row=1; row<=3; row++) {
    for (var column=1; column<=3; column++) {
      var row2 = Math.floor(Math.random() * 3 + 1);
      var column2 = Math.floor(Math.random() * 3 + 1);

      swapTiles("cell" + row + column, "cell" + row2 + column2);
    }
  }
}

function clickTile(row,column) {
  var cell = document.getElementById("cell" + row + column);
  var tile = cell.className;
  
  if (tile != "tile9") {
    if (column < 3) {
      if (document.getElementById("cell" + row + (column + 1)).className == "tile9") {
        swapTiles("cell" + row + column, "cell" + row + (column + 1));
        return;
      }
    }
    
    if (column > 1) {
      if (document.getElementById("cell" + row + (column - 1)).className == "tile9") {
        swapTiles("cell" + row + column, "cell" + row + (column - 1));
        return;
      }
    }

    if (row > 1) {
      if (document.getElementById("cell" + (row - 1) + column).className == "tile9") {
        swapTiles("cell" + row + column, "cell" + (row - 1) + column);
        return;
      }
    }

    if (row < 3) {
      if (document.getElementById("cell" + (row + 1) + column).className == "tile9") {
        swapTiles("cell" + row + column, "cell" + (row + 1) + column);
        return;
      }
    }
  }
}

// Appel de shuffle() dÃ¨s le chargement de la page
window.onload = shuffle;
</script>
</html>
